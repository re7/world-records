{% extends 'AppMainBundle::layout.html.twig' %}

{% macro runner(player) %}
    {% if player.link %}<a href="{{ player.link }}">{{ player.name }}</a>{% else %}{{ player.name }}{% endif %}
{% endmacro %}
{% macro runTitle(run) %}
    [{{ run.time }}] {{ run.game }} - {{ run.category }}
{% endmacro %}

{% import _self as macros %}

{% block content %}
    <div class="list-head">
        <span>Trier par : </span>
        <span class="element selected">Date d'ajout</span>
    </div>
    <div class="list">
        {% for record in records %}
            <div class="element">
                {% if record.run.thumbnail %}
                    <div class="video-thumbnail">
                        <a href="{{ record.run.links[0] }}"><img src="{{ record.run.thumbnail }}" width="80" height="60" alt="{{ macros.runTitle(record.run) }}" /></a>
                    </div>
                {% endif %}
                <div>
                    {% if record.run.links|length > 0 %}
                        <span class="title"><a href="{{ record.run.links[0] }}">{{ macros.runTitle(record.run) }}</a></span>
                    {% else %}
                        <span class="title">{{ record.run.time }} {{ record.run.game }} - {{ record.run.category }}</span> <span class="info">(pas de vid√©o)</span>
                    {% endif %}
                </div>
                <div class="description">
                    par {{ macros.runner(record.run.player) }},
                    sur {{ record.run.platform }},
                    le {{ record.run.date|date('d/m/Y') }}
                </div>
                <div class="clear"></div>
            </div>
        {% endfor %}
    </div>
    {% if nextPage %}
        <div class="list-foot">
            <a href="{{ path('app_main_record_list', {page: nextPage|default(2)}) }}">Plus</a>
        </div>
    {% endif %}
{% endblock %}
